<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

  <changeSet author="CONNECT_APP" id="ITER_157_CHANGE_FEEDBACK_TOPIC_TABLE">
    <sql>
     	UPDATE FEEDBACK_TOPIC SET TOPIC_CODE='PRICING_CARPARTS', DESCRIPTION ='Preise Personenwagen (Carparts)'  WHERE TOPIC_CODE='PRICING'

		INSERT INTO FEEDBACK_TOPIC(TOPIC_CODE,DESCRIPTION) VALUES('PRICING_WHEELS','Preise Reifen (Wheels)')
		INSERT INTO FEEDBACK_TOPIC(TOPIC_CODE,DESCRIPTION) VALUES('PRICING_MATIK','Preise Nutzfahrzeuge (Matik)')
		INSERT INTO FEEDBACK_TOPIC(TOPIC_CODE,DESCRIPTION) VALUES('PRICING_WSP','Preise Fahrzeug unabh√§ngige Artikel (WSP)')
		INSERT INTO FEEDBACK_TOPIC(TOPIC_CODE,DESCRIPTION) VALUES('PRICING_IS','Preise Workshop Equipment (IS)')
		
		ALTER TABLE FEEDBACK_TOPIC ADD SORT int NULL;
	</sql>
  </changeSet>
  
  <changeSet author="CONNECT_APP" id="ITER_157_UPDATE_SORT_COLUMN_FEEDBACK_TOPIC_TABLE">
    <sql>
		UPDATE FEEDBACK_TOPIC SET SORT = 1 WHERE TOPIC_CODE='PRICING_WHEELS'
		UPDATE FEEDBACK_TOPIC SET SORT = 2 WHERE TOPIC_CODE='PRICING_CARPARTS'
		UPDATE FEEDBACK_TOPIC SET SORT = 3 WHERE TOPIC_CODE='PRICING_MATIK'
		UPDATE FEEDBACK_TOPIC SET SORT = 4 WHERE TOPIC_CODE='PRICING_WSP'
		UPDATE FEEDBACK_TOPIC SET SORT = 5 WHERE TOPIC_CODE='PRICING_IS'
		UPDATE FEEDBACK_TOPIC SET SORT = 6 WHERE TOPIC_CODE='ORDERS_AVAILABILITY'
		UPDATE FEEDBACK_TOPIC SET SORT = 7 WHERE TOPIC_CODE='EASE_OF_USE'
		UPDATE FEEDBACK_TOPIC SET SORT = 8 WHERE TOPIC_CODE='MISSING_WRONG_DATA'
		UPDATE FEEDBACK_TOPIC SET SORT = 9 WHERE TOPIC_CODE='LICENSING'
		UPDATE FEEDBACK_TOPIC SET SORT = 10 WHERE TOPIC_CODE='SYSTEM_BROWSER_INTERFACES'
		UPDATE FEEDBACK_TOPIC SET SORT = 11 WHERE TOPIC_CODE='PROFILE_SETTINGS'
		UPDATE FEEDBACK_TOPIC SET SORT = 12 WHERE TOPIC_CODE='BONUS_MILES_PROGRAM'
		UPDATE FEEDBACK_TOPIC SET SORT = 13 WHERE TOPIC_CODE='OTHER';
	</sql>
  </changeSet>
  <changeSet author="CONNECT_APP" id="ITER_157_UPDATE_FEEDBACK_TOPIC_DEPARTMENT">
    <sql>
		DECLARE @DEPARTMENT_DATA_MANAGEMENT INT = (SELECT ID FROM FEEDBACK_DEPARTMENT WHERE DEPARTMENT_CODE='DATA_MANAGEMENT')
		
		DECLARE @TOPIC_PRICING_WHEELS INT = (SELECT ID FROM FEEDBACK_TOPIC WHERE TOPIC_CODE='PRICING_WHEELS')
		DECLARE @TOPIC_PRICING_MATIK INT = (SELECT ID FROM FEEDBACK_TOPIC WHERE TOPIC_CODE='PRICING_MATIK')
		DECLARE @TOPIC_PRICING_WSP INT = (SELECT ID FROM FEEDBACK_TOPIC WHERE TOPIC_CODE='PRICING_WSP')
		DECLARE @TOPIC_PRICING_IS INT = (SELECT ID FROM FEEDBACK_TOPIC WHERE TOPIC_CODE='PRICING_IS')
		
		INSERT INTO FEEDBACK_TOPIC_DEPARTMENT(TOPIC_ID, DEPARTMENT_ID) VALUES(@TOPIC_PRICING_WHEELS,@DEPARTMENT_DATA_MANAGEMENT)
		INSERT INTO FEEDBACK_TOPIC_DEPARTMENT(TOPIC_ID, DEPARTMENT_ID) VALUES(@TOPIC_PRICING_MATIK,@DEPARTMENT_DATA_MANAGEMENT)
		INSERT INTO FEEDBACK_TOPIC_DEPARTMENT(TOPIC_ID, DEPARTMENT_ID) VALUES(@TOPIC_PRICING_WSP,@DEPARTMENT_DATA_MANAGEMENT)
		INSERT INTO FEEDBACK_TOPIC_DEPARTMENT(TOPIC_ID, DEPARTMENT_ID) VALUES(@TOPIC_PRICING_IS,@DEPARTMENT_DATA_MANAGEMENT);
	</sql>
  </changeSet>
</databaseChangeLog>